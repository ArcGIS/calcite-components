/**
 * CSS Custom Properties
 *
 * These properties can be overridden using the component's tag as selector.
 *
 * @prop --calcite-combobox-item-text-color: defines the text color of a combobox item.
 * @prop --calcite-combobox-item-selection-icon-color: defines the icon color of the dot or custom icon shown at the start of a combobox item.
 * @prop --calcite-combobox-item-icon-color: defines the color of a custom combobox-item icon
 * @prop --calcite-combobox-item-box-shadow: defines the box shadow of a combobox item.
 * @prop --calcite-combobox-item-background-color: defines the background color of a combobox-item.
 */

/*
 * Internal
 *
 * --calcite-combobox-item-spacing-unit-l: *deprecated* in favor of --calcite-internal-combobox-item-spacing-inline which is more descriptive.
 * --calcite-internal-combobox-item-spacing-inline: defines the inline spacing of the combobox-item. Set via the [scale] prop on a combobox-item.
 * --calcite-combobox-item-spacing-unit-s: *deprecated* in favor of --calcite-internal-combobox-item-spacing-block which is more descriptive.
 * --calcite-internal-combobox-item-spacing-block: defines the block spacing of the combobox-item. Set via the [scale] prop on a combobox-item.
 * --calcite-combobox-item-spacing-indent: *deprecated* in favor of the simplified `--calcite-internal-combobox-item-spacing-inline` which is always an equal value based on the scale of the combobox-item.
 * --calcite-combobox-item-spacing-indent-multiplier, var(--calcite-internal-combobox-item-depth: *deprecated* in favor of --calcite-internal-combobox-item-depth which is more descriptive.
 * --calcite-internal-combobox-item-depth: defines the depth of the combobox-item in a combobox dropdown list. This is used as a multiplier to determine the inline-start padding of a combobox item.
 * --calcite-combobox-item-indent-value: *deprecated* in favor of --calcite-internal-combobox-item-icon-inline-start which is more descriptive.
 * --calcite-internal-combobox-item-icon-inline-start: defines the calculated starting indentation of a combobox-item icon in a combobox list. This value is calculated from --calcite-internal-combobox-item-spacing-inline multiplied by --calcite-internal-combobox-item-depth which is set in the JSX.
 * --calcite-combobox-item-selector-icon-size: *deprecated* in favor of --calcite-internal-combobox-item-dot-size which is more descriptive.
 * --calcite-internal-combobox-item-dot-size: defines the minimum size of the "dot" of a selected combobox-item. Set via the [scale] prop on a combobox-item.
 */

@include base-component();

:host {
  --calcite-combobox-item-select-icon-color: var(--calcite-color-transparent);
  --calcite-combobox-item-icon-color: var(--calcite-color-text-3);
  --calcite-combobox-item-shadow: var(--calcite-shadow-none);
  --calcite-combobox-item-text-color: var(--calcite-color-text-3);
  --calcite-combobox-item-background-color: none;
  --calcite-internal-combobox-item-select-icon-opacity: 0;

  box-shadow: var(--calcite-combobox-item-box-shadow);
  inline-size: var(--calcite-container-size-content-fluid);
}

// This targeting of the hovered class applied via the component's JS is required to keep the --calcite-combobox-item-background-color theme-able without polluting the styles of nested combobox-item .labels
:host(.label--hovered) {
  --calcite-combobox-item-background-color: var(--calcite-color-foreground-2);

  .label {
    background-color: var(--calcite-combobox-item-background-color);
  }
}

:host([selected]),
:host([active]) {
  --calcite-internal-combobox-item-select-icon-opacity: var(--calcite-opacity-full);
}

:host([active]) {
  --calcite-combobox-item-select-icon-color: var(--calcite-color-border-1);
}

:host([selected]) {
  --calcite-combobox-item-select-icon-color: var(--calcite-color-brand);
  --calcite-combobox-item-icon-color: var(--calcite-color-text-1);
  --calcite-combobox-item-text-color: var(--calcite-color-text-1);
  --calcite-internal-combobox-item-font-weight: var(--calcite-font-weight-medium);
}

.container {
  --calcite-internal-combobox-item-icon-inline-start: calc(
    var(--calcite-combobox-item-spacing-indent, var(--calcite-internal-combobox-item-spacing-inline)) *
      var(--calcite-combobox-item-spacing-indent-multiplier, var(--calcite-internal-combobox-item-depth))
  );
}

.scale--s {
  @apply text-n2h;
  --calcite-internal-combobox-item-spacing-inline: theme("spacing.2");
  --calcite-internal-combobox-item-spacing-block: theme("spacing.1");
  --calcite-internal-combobox-item-dot-size: theme("spacing.4");
}

.scale--m {
  @apply text-n1h;
  --calcite-internal-combobox-item-spacing-inline: theme("spacing.3");
  --calcite-internal-combobox-item-spacing-block: theme("spacing.2");
  --calcite-internal-combobox-item-dot-size: theme("spacing.4");
}

.scale--l {
  @apply text-0h;
  --calcite-internal-combobox-item-spacing-inline: theme("spacing.4");
  --calcite-internal-combobox-item-spacing-block: theme("spacing[2.5]");
  --calcite-internal-combobox-item-dot-size: theme("spacing.6");
}

@include disabled();

:host,
ul {
  @apply m-0 flex flex-col p-0;
}

:host(:focus),
ul:focus {
  @apply outline-none;
}

.label {
  @apply box-border
  cursor-pointer
  duration-150
  ease-in-out
  flex
  focus-base
  items-center
  no-underline
  relative;
  @include word-break();
  inline-size: var(--calcite-container-size-content-fluid);
  color: var(--calcite-combobox-item-text-color);
  padding-block: var(--calcite-internal-combobox-item-spacing-block);
  padding-inline: var(--calcite-internal-combobox-item-spacing-inline);
  font-weight: var(--calcite-internal-combobox-item-font-weight, inherit);
  background-color: var(--calcite-combobox-item-background-color);
  box-shadow: var(--calcite-combobox-item-shadow);
}

:host([disabled]) .label {
  @apply cursor-default;
}

// selected state
.label--selected {
  @apply text-color-1 font-medium;
}

.label--active {
  @apply focus-inset;
}

.title {
  padding-block: 0;
  padding-inline: var(--calcite-internal-combobox-item-spacing-inline);
}

.icon {
  @apply inline-flex
    duration-150
    ease-in-out;
  color: var(--calcite-combobox-item-select-icon-color);
  opacity: var(--calcite-internal-combobox-item-select-icon-opacity);
  padding-inline-start: var(--calcite-internal-combobox-item-icon-inline-start);
}

.icon--custom {
  color: var(--calcite-combobox-item-icon-color);
  margin-block-start: -1px;
  padding-inline-start: var(--calcite-internal-combobox-item-spacing-inline);
}

.icon--active {
  @apply text-color-1;
}

.icon--dot {
  @apply flex justify-center;
  min-inline-size: var(--calcite-internal-combobox-item-dot-size);
}

.icon--dot:before {
  text-align: start;
  content: "\2022";
}
