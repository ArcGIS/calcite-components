/**
 * CSS Custom Properties
 *
 * These properties can be overridden using the component's tag as selector.
 *
 * @prop --calcite-dropdown-item-background-color: Specifies the background color of the component.
 * @prop --calcite-dropdown-item-icon-color: Specifies the color of an icon in the component.
 * @prop --calcite-dropdown-item-indicator-color: Specifies the color of the indicator dot on the component.
 * @prop --calcite-dropdown-item-text-color: Specifies the text color of the component.
 *
 */

:host {
  @apply focus-base relative
    flex
    flex-grow
    items-center;

  // Host states
  &:host(:hover),
  &:host(:active),
  &:host(:focus) {
    .container {
      --calcite-internal-dropdown-item-text-color: var(--calcite-color-text-1);
      @apply no-underline;
    }
  }
  &:host(:focus) {
    @apply focus-inset outline-none;
  }
  &:host(:not([disabled])) {
    &:host(:hover) {
      .container {
        --calcite-internal-dropdown-item-icon-opacity: var(--calcite-opacity-full);
        --calcite-internal-dropdown-item-background-color: var(--calcite-color-foreground-2);
        --calcite-internal-dropdown-item-indicator-color: var(--calcite-color-border-1);
      }
    }
    &:host(:active) {
      .container {
        --calcite-internal-dropdown-item-background-color: var(--calcite-color-foreground-3);
      }
    }
  }

  &:host([selected]) {
    .container:not(.container--none-selection) {
      --calcite-internal-dropdown-item-icon-color: var(--calcite-color-brand);
      --calcite-internal-dropdown-item-icon-opacity: var(--calcite-opacity-full);
      --calcite-internal-dropdown-item-indicator-color: var(--calcite-color-brand);
      --calcite-internal-dropdown-item-text-color: var(--calcite-color-text-1);
      @apply font-medium;
    }
  }
}

// default item styling
.container,
.dropdown-link {
  @apply relative
    flex
    flex-grow
    cursor-pointer
    items-center
    no-underline
    duration-150
    ease-in-out;
  padding-inline-start: var(--calcite-internal-dropdown-item-space-x-start, theme("padding.8"));
  padding-inline-end: var(--calcite-internal-dropdown-item-space-x-end, theme("padding.3"));
  font-size: var(--calcite-internal-dropdown-item-font-size, var(--calcite-font-size--1));
  line-height: var(--calcite-internal-dropdown-item-line-height, 1rem /* 16px */);
  padding-block: var(--calcite-internal-dropdown-item-space-y, 0.5rem /* 8px */);
  color: var(
    --calcite-dropdown-item-text-color,
    var(--calcite-internal-dropdown-item-text-color, var(--calcite-color-text-3))
  );
}

// main dropdown container - always has .container & .container--[scale]
.container {
  text-align: start;
  background-color: var(
    --calcite-dropdown-item-background-color,
    var(--calcite-internal-dropdown-item-background-color, none)
  );

  &.container--none-selection {
    .dropdown-link {
      --calcite-internal-dropdown-item-space-x-start: theme("padding.0");
    }
  }

  &.container--s {
    --calcite-internal-dropdown-item-space-x-start: theme("padding.6");
    --calcite-internal-dropdown-item-space-x-end: theme("padding.2");
    --calcite-internal-dropdown-item-font-size: var(--calcite-font-size--2);
    --calcite-internal-dropdown-item-line-height: 1rem /* 16px */;
    --calcite-internal-dropdown-item-space-y: 0.25rem /* 4px */;

    // none-selection mode
    &.container--none-selection {
      --calcite-internal-dropdown-item-space-x-start: theme("padding.1");
    }

    .dropdown-item-icon {
      --calcite-internal-dropdown-item-space-x-start: theme("spacing.1");
      --calcite-internal-dropdown-item-icon-space-x-lg: theme("margin.2");
      --calcite-internal-dropdown-item-icon-space-x-sm: theme("margin.1");
    }
  }

  &.container--m {
    --calcite-internal-dropdown-item-space-x-start: theme("padding.8");
    --calcite-internal-dropdown-item-space-x-end: theme("padding.3");
    --calcite-internal-dropdown-item-font-size: var(--calcite-font-size--1);
    --calcite-internal-dropdown-item-line-height: 1rem /* 16px */;
    --calcite-internal-dropdown-item-space-y: 0.5rem /* 8px */;

    &.container--none-selection {
      --calcite-internal-dropdown-item-space-x-start: theme("padding.2");
    }

    .dropdown-item-icon {
      --calcite-internal-dropdown-item-space-x-start: theme("spacing.2");
      --calcite-internal-dropdown-item-icon-space-x-lg: theme("margin.3");
      --calcite-internal-dropdown-item-icon-space-x-sm: theme("margin.1");
    }
  }

  &.container--l {
    --calcite-internal-dropdown-item-space-x-start: theme("padding.10");
    --calcite-internal-dropdown-item-space-x-end: theme("padding.4");
    --calcite-internal-dropdown-item-font-size: var(--calcite-font-size-0);
    --calcite-internal-dropdown-item-line-height: 1.25rem /* 20px */;
    --calcite-internal-dropdown-item-space-y: 0.625rem /* 10px */;

    &.container--none-selection {
      --calcite-internal-dropdown-item-space-x-start: theme("padding.3");
    }

    .dropdown-item-icon {
      --calcite-internal-dropdown-item-space-x-start: theme("spacing.3");
      --calcite-internal-dropdown-item-icon-space-x-lg: theme("margin.4");
      --calcite-internal-dropdown-item-icon-space-x-sm: theme("margin.1");
    }
  }

  // when used as link move styling anchor
  &.container--link:not(.container--none-selection) {
    padding: 0;
  }
  &.container--link.container--none-selection {
    padding-inline-end: 0;
    padding-block: 0;
  }
}

// Will always be .dropdown-link (<a>) or .dropdown-item-content(<span><slot></span>). Never both.
.dropdown-link {
  @apply focus-base;
}
.dropdown-item-content {
  @apply flex-auto py-0.5;
  padding-inline-end: theme("margin.auto");
  padding-inline-start: theme("margin.1");
}

// item icon
// Selection Indicator Icon
calcite-icon.dropdown-item-icon {
  --calcite-icon-color: var(
    --calcite-dropdown-item-indicator-color,
    var(--calcite-internal-dropdown-item-indicator-color)
  );
  @apply absolute
    duration-150
    ease-in-out;
  transform: scale(0.9);
  inset-inline-start: var(--calcite-internal-dropdown-item-space-x-start, theme("spacing.2"));
  opacity: var(--calcite-internal-dropdown-item-icon-opacity, 0);
}
// Custom Icon Start / End
calcite-icon.dropdown-item-icon-start,
calcite-icon.dropdown-item-icon-end {
  --calcite-icon-color: var(--calcite-dropdown-item-icon-color, var(--calcite-internal-dropdown-item-icon-color));
}
.dropdown-item-icon-start {
  margin-inline-end: var(--calcite-internal-dropdown-item-icon-space-x-lg, theme("margin.3"));
  margin-inline-start: var(--calcite-internal-dropdown-item-icon-space-x-sm, theme("margin.1"));
}
.dropdown-item-icon-end {
  margin-inline-start: var(--calcite-internal-dropdown-item-icon-space-x-lg, theme("margin.3"));
}

@include base-component();
@include disabled();
